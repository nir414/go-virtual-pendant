<!DOCTYPE html>
<html>
<head>
    <title>Virtual Pendant - λ΅λ΄‡ μ μ–΄</title>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="/static/style.css">
    <script src="https://unpkg.com/konva@9.2.0/konva.min.js"></script>
</head>
<body>
    <div class="container">
        <h1>Virtual Pendant - λ΅λ΄‡ μ μ–΄ μΈν„°νμ΄μ¤</h1>
        
        <!-- SCARA λ΅λ΄‡ν” μ‹κ°ν™” μμ—­ -->
        <div class="robot-visualization">
            <h2>SCARA λ΅λ΄‡ν” μ‹κ°ν™”</h2>
            <div id="robot-canvas-container">
                <div id="robot-canvas"></div>
            </div>
            <div class="controls-info">
                <p><strong>π® μ΅°μ‘ λ°©λ²•:</strong></p>
                <ul>
                    <li>ν™”μ‚΄ν‘ ν‚¤ λλ” +/- ν‚¤: μ„ νƒλ μ¶• μ΅°μ </li>
                    <li>μ«μ ν‚¤ 1-6: μ΅°μΈνΈ μ„ νƒ</li>
                    <li>λ§μ°μ¤ ν : λ΅λ΄‡ν” μ„μ—μ„ ν λ΅ μ΅°μ </li>
                </ul>
            </div>
        </div>
        
        <div class="mode-selector">
            <h2>π® Jog Control</h2>
            <div style="margin: 15px 0; padding: 15px; background: #babac9; border-radius: 8px;">
                <button type="button" class="mode-btn" id="btn-computer" onclick="setJogModeButton('computer')">Computer</button>
                <button type="button" class="mode-btn" id="btn-world" onclick="setJogModeButton('world')">World</button>
                <button type="button" class="mode-btn" id="btn-tool" onclick="setJogModeButton('tool')">Tool</button>
                <button type="button" class="mode-btn active" id="btn-joint" onclick="setJogModeButton('joint')">Joint</button>
                <button type="button" class="mode-btn" id="btn-free" onclick="setJogModeButton('free')">Free</button>
            </div>
        </div>

        <h2>π― μ¶• μ„ νƒ λ° μ μ–΄</h2>
        <div class="axis-selector" id="axis-control">
            <div style="margin-bottom: 15px;">
                <label for="axisSelect">μ μ–΄ν•  μ¶• μ„ νƒ:</label>
                <select name="axisSelect" size="4" id="axisSelect" onchange="jogListChanged()" style="width:200px; padding:5px; margin-left:10px;">
                    <option value="joint1">Joint 1</option>
                    <option value="joint2">Joint 2</option>
                    <option value="joint3">Joint 3</option>
                    <option value="joint4">Joint 4</option>
                    <option value="joint5">Joint 5</option>
                    <option value="joint6">Joint 6</option>
                </select>
            </div>
            
            <div class="jog-controls" style="text-align: center;">
                <button class="jog-btn neg-btn" onclick="sendSelectedAxisJog('negative')" style="font-size: 18px; padding: 15px 30px;">- (κ°μ†)</button>
                <span id="selectedAxis" style="margin: 0 20px; font-weight: bold; font-size: 16px;">Joint 1</span>
                <button class="jog-btn" onclick="sendSelectedAxisJog('positive')" style="font-size: 18px; padding: 15px 30px;">+ (μ¦κ°€)</button>
            </div>
        </div>

        <div class="step-control">
            <label>μ¤ν… ν¬κΈ°: </label>
            <input type="number" id="stepSize" value="1.0" step="0.1" min="0.1" max="10">
            <span>Β° (μ΅°μΈνΈ) / mm (μΉ΄λ¥΄ν…μ‹μ•)</span>
        </div>

        <div class="speed-control">
            <h3>β΅ Jog Speed Control</h3>
            <div class="speed-input">
                <label>Jog Speed:</label>
                <input type="number" id="jogSpeed" value="10" min="1" max="100">
                <span>%</span>
                <button onclick="setJogSpeed()">Set</button>
            </div>
            <div class="speed-buttons">
                <button class="speed-btn" onclick="setJogSpeedValue(1)">1%</button>
                <button class="speed-btn" onclick="setJogSpeedValue(10)">10%</button>
                <button class="speed-btn" onclick="setJogSpeedValue(20)">20%</button>
                <button class="speed-btn" onclick="setJogSpeedValue(40)">40%</button>
                <button class="speed-btn" onclick="setJogSpeedValue(60)">60%</button>
                <button class="speed-btn" onclick="setJogSpeedValue(80)">80%</button>
                <button class="speed-btn" onclick="setJogSpeedValue(100)">100%</button>
            </div>
        </div>

        <div class="status" id="status">λ€κΈ° μ¤‘...</div>

        <h2>π“ ν„μ¬ μƒνƒ</h2>
        <div class="status-display" id="realtime-status">
            <div class="status-grid">
                <div>
                    <strong>π® μ΅°κΉ… λ¨λ“:</strong> <span id="current-jog-mode">λ΅λ”©μ¤‘...</span><br>
                    <strong>π― μ„ νƒλ μ¶•:</strong> <span id="current-axis">λ΅λ”©μ¤‘...</span><br>
                    <strong>β΅ μ „μ› μƒνƒ:</strong> <span id="power-state">λ΅λ”©μ¤‘...</span>
                </div>
                <div>
                    <strong>π”§ μ¶• κ°μ:</strong> <span id="axis-count">λ΅λ”©μ¤‘...</span><br>
                    <strong>ποΈ JOG ν—μ©:</strong> <span id="allow-jog">λ΅λ”©μ¤‘...</span><br>
                    <strong>β οΈ μ¤λ¥:</strong> <span id="error-desc">μ—†μ</span>
                </div>
            </div>
        </div>

        <h2>π“ ν„μ¬ μ„μΉ</h2>
        <button class="refresh-btn" onclick="updatePosition()">π”„ μ„μΉ μƒλ΅κ³ μΉ¨</button>
        <div class="coords" id="coordinates">μ„μΉ μ •λ³΄λ¥Ό λ΅λ”© μ¤‘...</div>
    </div>

    <script src="/static/app.js"></script>
</body>
</html>
